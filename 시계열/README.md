# 시계열(time series)

### 1. 시계열이란?
+ 일정 시간 간격으로 배치된 데이터들의 수열을 말한다.

### 2. 시계열해석(time series analysis) 
+ 시계열을 해석하고 이해하는데 쓰이는 여러가지 방법을 연구하는 분야이다.
+ 시계열이 어떤법칙에서 생성되어서 나오느냐는 기본적인 질문을 이해하는것이 궁극적인 목표이다.

### 3. 시계열예측(time series prediction) 
+ 주어진 시계열을 보고 수학적인 모델을 만들어서 미래에 일어난 것들을 예측하는 것을 말한다. 

### 4. 시계열의 분류
+ 연속(continuous) 시계열 : 자료가 연속적으로 생성된 것을 의미하며, 실제로 많은 시계열들이 연속적으로 생성된다.
+ 이산(discrete) 시계열 : 이산적 시점에서 자료가 생성된 것을 의미하며, 일정한 시차를 두고 관측되므로 이산 시계열의 형태를 지니는 경우가 많다.
    - 여기서 이산은 값들이 연속적이지않고 뚝뚝 떨어져 있는것을 의미한다.

### 5. 시계열의 구성요소
+ 추세요인(Trend factor) : 자료의 그림을 그렸을 때 그 형태가 오르거나 또는 내리는 추세를 따르는 경우를 말하며, 선형과 이차식형태, 지수적형태로 나타내진다.
+ 순환요인(Cyclical factor) : 명백한 경제적이나 자연적인 이유가 없이 알려지지 않은 주기를 가지고 변화하는 자료를 말한다.
+ 계절요인(Seasonal factor) : 요일마다 반복되거나 일년중 각 월에 의한 변화, 사분기 자료에서 각 분기에 의한 변화등 고정된 주기에 따라 자료가 변화는 경우를 말한다.
+ 불규칙요인(Irregular factor) : 추세요인, 계절요인, 순환요인으로 설명할 수 없는 회귀분석에서 오차에 해당하는 요인을 말한다.

### 6. 시계열 데이터
+ 시간에서 순차적으로 관측한 값들의 집합을 말한다.
+ 독립변수를 이용하여 종속변수를 예측하는 일반적인 기계학습 방법론에 대하여 시간을 독립변수로 사용한다.
+ 독립변수로 시간을 사용하는 특성때문에 분석에 있어서 일반적인 방법들과는 다른 몇가지 고려가 필요하다.

### 7. 시계열 분석을 위한 방법론
+ 시계열예측
    - 추세분석(Treand Analysis)
    - 평활법(Smoothing Method)
    - 분해법(Decomposition Method)
    - 자기회귀누적이동평균(Auto Regressive Intergrated Moving Average : ARIMA)
    - 이분산자기회귀모형(Auto Regressive Conditional Heteroskedasticity)

+ 시계열해석
    - 스펙트럼분석(Spectral Analysis)
    - 개입분석(Intervention Analysis)
    - 전이함수모형(Transfer Fanction Model)
    - 자기상관오차를 갖는 회귀모형(Auto Regressive Error Model)

### 8. 시계열 데이터 분석의 목적
+ 현상을 시간에 따라 추적 : 현상에 대한 풍부한 사실을 파악하는 것이 가능해진다.
    - 미래의 값을 예측 ex) 경제학자 : 금융시장 예측, 도시계획자 : 미래교통수요예측
    - 시계열 데이터 특성 파악 ex) 경향, 주기, 계절성, 불규칙성등

### 9. 시계열 데이터 분석 방법
+ 시계열 데이터 분석할때는 관측시점들간의 시차(time lag)가 중요한 역할을 한다.
+ 일변량 시계열 분석만을 가지고 분석
    - 회귀분석방법(계랑경제)방법, Box-Jenkins방법(ARIMA) : 수학적 이론 모형에 의존하고 시간에 따라 변동이 많은 빠른 시계열 데이터에 적용한다.
    - 지수평활법, 시계열 분해법 : 다소 직관적인 방법이며 시간에 따른 변동이 느린 데이터를 분석하는데 사용한다.
+ 다중 시계열 분석과 설명변수(입력)가 존재하는 경우 
    - 회귀모형(계량경제모형) : 시계열 데이터에 대한 회귀분석을 말한다.
    - 전이함수모형(Transfer Fanction Model) : 입력 시계열과 출력 시계열들사이의 관계를 회귀모형의 형태로 표현된 모형을 뜻한다.
    - 개입분석(Intervention Analysis) : 시계열 데이터에 영향을 줄 수 있는 사건이 언제 발생했는지를 아는 경우 이들이 어떠한 형태로 자료에 영향을 미칠지를 모형화한 후 이들효과를 추정하고 유의성 여부를 판단하는 분석을 뜻한다.
    - 상태공간분석(State Space Analysis) : 시계열 생성구조를 상태전이식과 관측식이라는 두가지의 수식으로 정의하는 시계열 모형을 말한다.
    - 다변량 ARIMA모형 : 추후 뒤에서 설명한다.
+  이론과 상황에 따른 분석 방법 
    - 수학적 이론 모형 : 회귀분석(계량경제)방법와 Box-Jenkins방법
    - 직관적 방법 : 지수평활법과 시계열 분해법, 시간에 따른 변동이 느린 데이터분석에 활용한다.
    - 장기예측 : 회귀분석방법을 활용한다.
    - 단기예측 : Box-Jenkins방법과 지수평활법, 시계열 분해법을 활용한다.

### 10. 정상성이란?
+ 모든 시점에 대해 일정한 평균을 가진다.
+ 분산도 시점에 의존하지 않는다.
+ 공분산은 단지 시차에만 의존하고 실제 어느시점 t,s에는 의존하지 않는다.
+ 위 3개의 조건중 하나라도 만족하지 않을 시에 비정상성으로 분류된다.

### 11. 정상성 시계열 데이터와 비정상성 시계열 데이터
+ 정상성 시계열 데이터 : 비정상 시계열을 핸들링하여 다루기 쉬운 시계열 데이터로 변환한 데이터이다.
+ 비정상성 시계열 데이터 : 시계열을 분석하는데 다루기 어려운 시계열 데이터이다.(대부분의 시계열 데이터이다.)

### 12. 정상성 시계열의 특징 
+ 어떤 시점에서 평균과 분사누 자기공분산을 측정하더라도 동일한 값을 갖는다.
+ 항상 그 평균값으로 회귀하려는 경향이 있으므로 평균값 주변에서의 변동은 대체로 일정한 폭을 갖는다.
+ 정상성 시계열이 아닌 경우 특정기간의 시계열 데이터로 부터 얻은 정보를 다른 시기로 일반화할 수 있다.

### 13. 정상 확률 과정과 비정상 확률 과정
+ 정상 확률 과정
    - 협의의 정상확률과정이다.
    - 확률 과정의 모든 모멘트가 시간차이에만 의존하고 절대시간에 의존하지 않는 것이다.
    - 자기상관계수함수를 ACF로 표현한다.
    - 시간이 지나도 신호의 확률적 특성이 그대로 유지되는 확률과정이다.
+ 비정상 확률 과정
    - 시계열이 안정적이지 않을 때에는 로그를 이용하거나 차분을 통해 시계열은 안정적으로 변환한 뒤에 분석을 시행한다.

### 14. ARMA(Box-Jenkins) 설명
+ AR모형과 MA모형을 합친 모형이다.
+ AR(Auto Regression)모형 : 자기상관성(어떤 변수에 대하여 이전의 값이 이후의 값에 영향을 미치고 있는 상황)을 시계열 모형으로 배열한 것이다.
+ MA(Moving Average)모형 : 시간이 지날수록 어떠한 변수의 평균값이 지속적으로 증가하거나 감소하는 경향에 대한 이동평균을 시계열 모형으로 구성하는 것을 의미한다.
+ Box-Jenkins : 지난 과거 시계열 데이터를 가장 잘 접합시키는 방법론의 제안이다. 

### 15. ARIMA설명
+ 비정상 과정 모형중 가장 대표적인 것은 ARMA모형을 누적한 ARIMA모형이다.
+ ARIMA모형은 과거지식이나 경험을 바탕으로 한 행동에 따라 시계열이 움직이고 있음을 기초로 하는 것이다.
+ 과거의 관측값과 오차를 사용해서 현재의 시계열 값을 설명한다.
+ ARMA(Auto Regressive Moving Average) 일반화한 것이다.
+ ARIMA : 비정상성 시계열 데이터에 적용 가능하다.
    - Auto Regressive : 자기회귀모형을 뜻한다.
    - Moving Average : 이동평균모형을 뜻한다.
    - 자기회귀와 이동평균을 고려하는 모형이다.
    - 시계열의 비정상성을 설명하기위해 관측기간의 차분을 사용한다는 차이점이 있다.
+ 규칙성을 만드는 패턴
    - 자기상관성(Auto Correlativeness) : 이전의 결과와 이후의 결과사이에서 발생하는 현상을 말한다.
    - 이동평균(Moving Average) : 이전에 생긴 불규칙한 사건이 이후의 결과에 편향성을 초래하는 이동현상을 말한다.
+ White Noise
    - 많은 수계열 모형들이 불규칙한 패턴을 의미한다.
    - 평균이 0이며, 일정한 분산을 지닌 정규분포에서 추출된 임의의 수치라고 규정
    - 정규분포 가정은 모델의 해석을 전반적으로 편리하게 만들기 때문에 대부분의 통게 및 수리분석에서 채택한다.
    - 회귀식에서 설명되지않은 ERROR의 의미와 유사하다.

### 16. ARIMA 모델의 모수의미
+ AR : 자기회귀(Auto Regressive) 이전 관측값의 오차항이 이후 관측값에 영향을 주는 모형을 말한다, 즉 p시점 전의 데이터가 현재의 데이터에 영향을 주는 자기회귀모형을 말한다.
+ I : Integrated 누적을 의미하는 것으로, 차분을 이용하는 시계열 모형들에 붙이는 표현이다.
+ MA : 이동평균(Moving Average) 관측값이 이전의 연속적인 오차항의 영향을 받는다는 모형을 말하며, 유한한 개수의 백색잡음 결합으로 언제나 정상성을 만족한다.
+ 현실에 존재하는 시계열 데이터는 불안정한 경우가 많다.
+ AR(p),MA(q) 이나 둘을 합한 ARMA(p,q)모형으로는 이러한 불안정성을 설명할 수 없다.
+ 이러한 비정상성을 제거하는 과정을 포함하는 것이 ARIMA모형이며, ARIMA(p,d,q)로 표현된다.
+ 과거의 데이터가 지니고 있던 '추세 Momentum'까지 반영하게 된다.
+ 상관관계(Correlation)뿐만아니라 통합(Cintegration)까지 고려한 모델이다.
+ ARIMA의 모수는 크게 3가지이다.
    - AR모형의 Lag를 의미하는 p, MA모형의 Lag를 의미하는 q, 차분 횟수를 의미하는 d이다.
    - 보통은 p, d, q의 순서로 말한다.
    - p+q < 2, p*q = 0 -> p나 q 두개중 하나는 0이라는 이야기이다.
        * 시계열 데이터에서는 하나의 경향을 띄기 때문에, 이렇게 사용하는 것이 더 잘 맞다.

### 17. p와 d, q는 어떻게 정의하는가?
+ ACF plot와 PACF plot을 통해 AR및 MA의 모수를 추정한다.
+ ACF(Auto Correlation Function) : Lag에 따른 관측치들 사이의 관련성을 측정하는 함수이다.
+ PACF(Partial Auto Correlation Function) : k이외의 모든 다른 시점 관측치의 영향력을 배제하고 y_k와 y_(K-1) 두관측치의 관련성을 측정하는 함수이다.
+ AR의 특성 : ACF는 천천히 감소하고 PACF는 처음 시차를 제외하고 급격히 감소한다.(0,1)
+ MA의 특성 : ACF는 급격히 감소하고 PACF는 천천히 감소한다.(1,0)
+ 급격히 감소하는 시차를 각 AR과 MA모형의 모수(p,q)로 사용한다.
+데이터를 차분하여 ACF및 PACF 계산함으로써 적절한 차분횟수까지 구할수 있다.



